<% let email = user.email; %> 

<link
	rel="stylesheet"
	href="/logged-in/account-settings/account-settings.css"
/>
<script defer src="/logged-in/account-settings/account-settings.js"></script>
<div class="main-content">
	<main>
		<div class="page-header">
			<%- include('../partials/messages'); %>
			<div class="header-wrap">
				<div class="title-wrap">
					<h1>Account Settings</h1>
					<small>Change your profile and account settings</small>
				</div>
			</div>
		</div>
		<div class="account-settings-container">
			<div class="settings-sidebar">
				<a href="#account" class="menu-item"
					><i class="fas fa-user"></i>Account</a
				>
				<a href="#password" class="menu-item"
					><i class="fas fa-lock"></i>Password</a
				>
				<a href="#timeclock" class="menu-item"
					><i class="fas fa-user-clock"></i>Time Clock</a
				>
			</div>
			<div class="section-content">
				<div id="account" class="section">
					<h2>Personal Info</h2>
					<form action="update-account-info" method="POST">
						<div>
							<% const firstname = user.fullname.split(" ")[0].charAt(0).toUpperCase() + user.fullname.split(" ")[0].slice(1) %> 
							<label for="">Firstname</label>
							<input type="text" name="firstname" value="<%= firstname %>">
						</div>
						<div>
							<% const lastname = user.fullname.split(" ")[1].charAt(0).toUpperCase() + user.fullname.split(" ")[1].slice(1) %> 
							<label for="">Lastname</label>
							<input type="text" name="lastname" value="<%= lastname %>">
						</div>
						<div>
							<label for="">Email</label>
							<input type="email" name="email" value="<%= user.email %>">
						</div>
						<div class="btn-wrap">
							<button type="submit">Save Changes</button>
						</div>
					</form>
				</div>
				<div id="password" class="section">
					<h2>Change Password</h2>
					<form action="change-account-password" method="POST">
						<div>
							<label for="">Old Password</label>
							<input type="password" name="oldPlainTextPassword" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
						</div>
						<div>
							<label for="">New password</label>
							<input type="password" name="newPassword" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
						</div>
						<div>
							<label for="">Confirm new password</label>
							<input type="password" name="confirmNewPassword" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;">
						</div>
						<div class="btn-wrap">
							<button type="submit">Save Changes</button>
						</div>
					</form>
				</div>
				<div id="timeclock" class="section">
					<h2>Time Clock History</h2>
					<input type="hidden" id="user-clock-history" value="<%= JSON.stringify(user.timeClock.clockHistory) %>">
					<div class="clock-filters">
						<p>From <input type="date" id="fromDate"></p>
						<p>To <input type="date" id="toDate"></p>
						<button type="button" id="filter-dates-btn">Filter</button>
						<button type="button" id="reset-dates-btn">Reset</button>
						<p id="hours-worked-text"> </p>
						<% if(user.admin) { %> 
							<div class="admin-view">
								<p>Employee Totals:</p>
								<input type="checkbox" id="totalUpEmployeeHours">
							</div>
							<p id="pay-period"></p>
						<% } %> 
					</div>
					<table id="table">
						<thead>
							<tr>
								<td>Date</td>
								<td>Clock In Time</td>
								<td>Clock Out Time</td>
								<td>Hours Worked</td>
							</tr>
						</thead>
						<tbody id="tbodyref">
							
						</tbody>
					</table>
					<table class="admin-table hide">
						<thead>
							<tr>
								<td>Employee</td>
								<td>Hours Worked</td>
								<td>Pay Period</td>
							</tr>
						</thead>
						<tbody id="adminTBodyRed">

						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>
</div>
